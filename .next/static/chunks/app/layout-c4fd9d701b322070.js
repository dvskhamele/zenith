(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{953:function(e,o,t){Promise.resolve().then(t.t.bind(t,9974,23)),Promise.resolve().then(t.t.bind(t,2778,23)),Promise.resolve().then(t.bind(t,1043))},1043:function(e,o,t){"use strict";t.d(o,{Providers:function(){return h}});var r=t(7437),n=t(1245),s=t(6214),i=t(2265),a=(0,i.createContext)({client:s.ZP});function c(e){var o=e.children,t=e.client,r=e.apiKey,n=e.options,c=(0,i.useRef)(null),l=(0,i.useMemo)(function(){return t?(r&&console.warn("[PostHog.js] You have provided both `client` and `apiKey` to `PostHogProvider`. `apiKey` will be ignored in favour of `client`."),n&&console.warn("[PostHog.js] You have provided both `client` and `options` to `PostHogProvider`. `options` will be ignored in favour of `client`."),t):(r||console.warn("[PostHog.js] No `apiKey` or `client` were provided to `PostHogProvider`. Using default global `window.posthog` instance. You must initialize it manually. This is not recommended behavior."),s.ZP)},[t,r,JSON.stringify(n)]);return(0,i.useEffect)(function(){if(!t){var e=c.current;e?(r!==e.apiKey&&console.warn("[PostHog.js] You have provided a different `apiKey` to `PostHogProvider` than the one that was already initialized. This is not supported by our provider and we'll keep using the previous key. If you need to toggle between API Keys you need to control the `client` yourself and pass it in as a prop rather than an `apiKey` prop."),n&&!function e(o,t,r){if(void 0===r&&(r=new WeakMap),o===t)return!0;if("object"!=typeof o||null===o||"object"!=typeof t||null===t)return!1;if(r.has(o)&&r.get(o)===t)return!0;r.set(o,t);var n=Object.keys(o),s=Object.keys(t);if(n.length!==s.length)return!1;for(var i=0;i<n.length;i++){var a=n[i];if(!s.includes(a)||!e(o[a],t[a],r))return!1}return!0}(n,e.options)&&s.ZP.set_config(n)):(s.ZP.__loaded&&console.warn("[PostHog.js] `posthog` was already loaded elsewhere. This may cause issues."),s.ZP.init(r,n)),c.current={apiKey:r,options:null!=n?n:{}}}},[t,r,JSON.stringify(n)]),i.createElement(a.Provider,{value:{client:l}},o)}var l=function(e,o){return(l=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,o){e.__proto__=o}||function(e,o){for(var t in o)Object.prototype.hasOwnProperty.call(o,t)&&(e[t]=o[t])})(e,o)};"function"==typeof SuppressedError&&SuppressedError;var u=function(e){return"function"==typeof e},g={componentStack:null,exceptionEvent:null,error:null};function h(e){let{children:o}=e;return(0,r.jsx)(c,{client:s.ZP,children:(0,r.jsx)(n.H,{children:o})})}!function(e){function o(o){var t=e.call(this,o)||this;return t.state=g,t}(function(e,o){if("function"!=typeof o&&null!==o)throw TypeError("Class extends value "+String(o)+" is not a constructor or null");function t(){this.constructor=e}l(e,o),e.prototype=null===o?Object.create(o):(t.prototype=o.prototype,new t)})(o,e),o.prototype.componentDidCatch=function(e,o){var t,r=this.props.additionalProperties;u(r)?t=r(e):"object"==typeof r&&(t=r);var n=this.context.client.captureException(e,t),s=o.componentStack;this.setState({error:e,componentStack:s,exceptionEvent:n})},o.prototype.render=function(){var e=this.props,o=e.children,t=e.fallback,r=this.state;if(null==r.componentStack)return u(o)?o():o;var n=u(t)?i.createElement(t,{error:r.error,componentStack:r.componentStack,exceptionEvent:r.exceptionEvent}):t;return i.isValidElement(n)?n:(console.warn("[PostHog.js][PostHogErrorBoundary] Invalid fallback prop, provide a valid React element or a function that returns a valid React element."),i.createElement(i.Fragment,null))},o.contextType=a}(i.Component),s.ZP.init("phc_fCgSHCQAoCzBIKGttKYCeCOGa0CFA9tUjY8gS0RBmrJ",{api_host:"https://eu.i.posthog.com",person_profiles:"identified_only",capture_pageview:!1})},1245:function(e,o,t){"use strict";t.d(o,{H:function(){return c},a:function(){return l}});var r=t(7437),n=t(2265),s=t(8123),i=t(6634);let a=(0,n.createContext)(void 0);function c(e){let{children:o}=e,[t,c]=(0,n.useState)(null),[l,u]=(0,n.useState)(!0);(0,n.useEffect)(()=>{console.log("AuthProvider: Initializing"),(async()=>{try{console.log("AuthProvider: Checking current user");let o=localStorage.getItem("supabase_access_token"),t=localStorage.getItem("facebook_auth_completed");if(o&&t){var e;console.log("AuthProvider: Found OAuth tokens, setting session");let{data:t,error:r}=await i.O.auth.setSession({access_token:o,refresh_token:localStorage.getItem("supabase_refresh_token")||""});if(r&&console.error("AuthProvider: Error setting session",r),null==t?void 0:null===(e=t.session)||void 0===e?void 0:e.user){console.log("AuthProvider: User authenticated from OAuth tokens",t.session.user),c(t.session.user),u(!1);return}}try{let e=await (0,s.ts)();console.log("AuthProvider: Current user result:",e),c(e)}catch(e){console.log("AuthProvider: No authenticated user found",e),localStorage.getItem("facebook_access_token")?(console.log("AuthProvider: Found Facebook token, creating mock user"),c({id:"facebook-user",email:"facebook-user@zenith.local",user_metadata:{provider:"facebook"}})):c(null)}}catch(e){console.log("AuthProvider: User not logged in",e),localStorage.getItem("facebook_access_token")?(console.log("AuthProvider: Found Facebook token, creating mock user"),c({id:"facebook-user",email:"facebook-user@zenith.local",user_metadata:{provider:"facebook"}})):c(null)}finally{console.log("AuthProvider: Finished checking user"),u(!1)}})(),console.log("AuthProvider: Setting up auth state listener");let{data:e}=i.O.auth.onAuthStateChange((e,o)=>{console.log("AuthProvider: Auth state changed:",e,o),(null==o?void 0:o.user)?(console.log("AuthProvider: User authenticated",o.user),c(o.user)):(console.log("AuthProvider: No user in session"),localStorage.getItem("facebook_access_token")?(console.log("AuthProvider: Found Facebook token, creating mock user"),c({id:"facebook-user",email:"facebook-user@zenith.local",user_metadata:{provider:"facebook"}})):c(null)),u(!1)});return()=>{console.log("AuthProvider: Cleaning up auth listener"),null==e||e.subscription.unsubscribe()}},[]);let g=async()=>{try{console.log("AuthProvider: Logging out user"),await (0,s.TX)(),localStorage.removeItem("facebook_access_token"),localStorage.removeItem("facebook_auth_completed"),localStorage.removeItem("supabase_access_token"),localStorage.removeItem("supabase_refresh_token"),c(null)}catch(e){console.error("AuthProvider: Error logging out:",e),localStorage.removeItem("facebook_access_token"),localStorage.removeItem("facebook_auth_completed"),localStorage.removeItem("supabase_access_token"),localStorage.removeItem("supabase_refresh_token"),c(null)}};return console.log("AuthProvider: Rendering with state",{user:t,loading:l}),(0,r.jsx)(a.Provider,{value:{user:t,loading:l,logout:g},children:o})}function l(){let e=(0,n.useContext)(a);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return console.log("useAuth: Returning context",e),e}},8123:function(e,o,t){"use strict";t.d(o,{TX:function(){return a},a$:function(){return n},eu:function(){return i},pH:function(){return s},ts:function(){return c}});var r=t(6634);async function n(e,o){console.log("Registering user with email:",e);let{data:t,error:n}=await r.O.auth.signUp({email:e,password:o});if(n)throw console.error("Registration error:",n),Error(n.message);return console.log("Registration successful:",t),t}async function s(e,o){console.log("Logging in user with email:",e);let{data:t,error:n}=await r.O.auth.signInWithPassword({email:e,password:o});if(n)throw console.error("Login error:",n),Error(n.message);return console.log("Login successful:",t),t}async function i(){let e="".concat(window.location.origin,"/auth/callback");console.log("Initiating Facebook OAuth with redirect URL:",e);let{data:o,error:t}=await r.O.auth.signInWithOAuth({provider:"facebook",options:{redirectTo:e,queryParams:{scope:"public_profile,email,pages_show_list,pages_manage_posts"}}});if(t){if(console.error("Facebook OAuth error:",t),console.error("Error details:",{message:t.message,status:t.status,name:t.name}),t.message.includes("external provider")){console.log("Trying with basic scopes...");let{data:o,error:t}=await r.O.auth.signInWithOAuth({provider:"facebook",options:{redirectTo:e,queryParams:{scope:"public_profile,email,pages_show_list,pages_manage_posts"}}});if(t)throw console.error("Retry failed:",t),Error(t.message);return console.log("Retry successful:",o),o}throw Error(t.message)}return console.log("Facebook OAuth initiated successfully:",o),o}async function a(){console.log("Logging out user");let{error:e}=await r.O.auth.signOut();if(e)throw console.error("Logout error:",e),Error(e.message);return console.log("Logout successful"),!0}async function c(){console.log("Getting current user");let{data:e,error:o}=await r.O.auth.getUser();if(o)throw console.error("Get user error:",o),Error(o.message);return console.log("Current user:",e.user),e.user}},6634:function(e,o,t){"use strict";t.d(o,{O:function(){return r}});let r=(0,t(8439).eI)("https://qfpvsyhtijwxkmyrqswa.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZS1kZW1vIiwicm9sZSI6ImFub24iLCJleHAiOjE5ODM4MTI5OTZ9.CRXP1A7WOeoJeXxjNni43kdQwgnWNReilDMblYTn_I0")},2778:function(){},9974:function(e){e.exports={style:{fontFamily:"'__Inter_e8ce0c', '__Inter_Fallback_e8ce0c'",fontStyle:"normal"},className:"__className_e8ce0c"}}},function(e){e.O(0,[635,878,439,971,117,744],function(){return e(e.s=953)}),_N_E=e.O()}]);