"use strict";(()=>{var e={};e.id=3324,e.ids=[3324],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},32615:e=>{e.exports=require("http")},35240:e=>{e.exports=require("https")},68621:e=>{e.exports=require("punycode")},76162:e=>{e.exports=require("stream")},17360:e=>{e.exports=require("url")},71568:e=>{e.exports=require("zlib")},94050:(e,o,t)=>{t.r(o),t.d(o,{originalPathname:()=>k,patchFetch:()=>h,requestAsyncStorage:()=>u,routeModule:()=>c,serverHooks:()=>l,staticGenerationAsyncStorage:()=>d});var r={};t.r(r),t.d(r,{GET:()=>p});var s=t(49303),a=t(88716),n=t(60670),i=t(7030);async function p(e){try{let{data:{session:o},error:t}=await i.O.auth.getSession();if(t)return console.error("Session error:",t),new Response(JSON.stringify({error:"Failed to get session"}),{status:500,headers:{"Content-Type":"application/json"}});if(!o)return new Response(JSON.stringify({error:"No active session"}),{status:401,headers:{"Content-Type":"application/json"}});let r=o.provider_token,s=e.headers.get("x-facebook-token"),a={sessionExists:!!o,facebookTokenFromSession:!!r,facebookTokenFromHeader:!!s,userId:o?.user?.id,provider:o?.user?.app_metadata?.provider,hasFacebookProvider:o?.user?.identities?.some(e=>"facebook"===e.provider)},n=r||s;if(n)try{let e=await fetch(`https://graph.facebook.com/v19.0/debug_token?input_token=${n}&access_token=${n}`),o=await e.json();a.tokenValidation={isValid:e.ok,data:o};let t=await fetch(`https://graph.facebook.com/v19.0/me?access_token=${n}&fields=id,name,email`),r=await t.json();if(a.userProfileAccessible=t.ok,a.userProfile=r,t.ok){let e=await fetch(`https://graph.facebook.com/v19.0/me/accounts?access_token=${n}&fields=name,id,category,picture,fan_count`),o=await e.json();a.pagesAccessible=e.ok,a.pagesData=o,a.pagesCount=o.data?o.data.length:0,o.data&&0===o.data.length&&(a.pagesEmptyReasons=["User may not have any Facebook pages","Token may lack pages_show_list permission","User account may be personal rather than business"])}}catch(e){console.error("Facebook token test error:",e),a.tokenTestError=e.message}else a.noTokenReason="No Facebook token found in session or headers";return console.log("Facebook debug info:",a),new Response(JSON.stringify(a),{status:200,headers:{"Content-Type":"application/json"}})}catch(e){return console.error("Facebook debug error:",e),new Response(JSON.stringify({error:e.message||"Internal server error"}),{status:500,headers:{"Content-Type":"application/json"}})}}let c=new s.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/facebook/debug/route",pathname:"/api/facebook/debug",filename:"route",bundlePath:"app/api/facebook/debug/route"},resolvedPagePath:"/Users/test/startups/zenith/src/app/api/facebook/debug/route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:u,staticGenerationAsyncStorage:d,serverHooks:l}=c,k="/api/facebook/debug/route";function h(){return(0,n.patchFetch)({serverHooks:l,staticGenerationAsyncStorage:d})}},49303:(e,o,t)=>{e.exports=t(30517)},7030:(e,o,t)=>{t.d(o,{O:()=>r});let r=(0,t(69498).eI)("https://qfpvsyhtijwxkmyrqswa.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZS1kZW1vIiwicm9sZSI6ImFub24iLCJleHAiOjE5ODM4MTI5OTZ9.CRXP1A7WOeoJeXxjNni43kdQwgnWNReilDMblYTn_I0")}};var o=require("../../../../webpack-runtime.js");o.C(e);var t=e=>o(o.s=e),r=o.X(0,[8948,9498],()=>t(94050));module.exports=r})();