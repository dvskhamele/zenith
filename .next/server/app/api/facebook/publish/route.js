"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/facebook/publish/route";
exports.ids = ["app/api/facebook/publish/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "punycode":
/*!***************************!*\
  !*** external "punycode" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("punycode");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("zlib");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Ffacebook%2Fpublish%2Froute&page=%2Fapi%2Ffacebook%2Fpublish%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ffacebook%2Fpublish%2Froute.ts&appDir=%2FUsers%2Ftest%2Fstartups%2Fzenith%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Ftest%2Fstartups%2Fzenith&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Ffacebook%2Fpublish%2Froute&page=%2Fapi%2Ffacebook%2Fpublish%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ffacebook%2Fpublish%2Froute.ts&appDir=%2FUsers%2Ftest%2Fstartups%2Fzenith%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Ftest%2Fstartups%2Fzenith&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_test_startups_zenith_src_app_api_facebook_publish_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/facebook/publish/route.ts */ \"(rsc)/./src/app/api/facebook/publish/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/facebook/publish/route\",\n        pathname: \"/api/facebook/publish\",\n        filename: \"route\",\n        bundlePath: \"app/api/facebook/publish/route\"\n    },\n    resolvedPagePath: \"/Users/test/startups/zenith/src/app/api/facebook/publish/route.ts\",\n    nextConfigOutput,\n    userland: _Users_test_startups_zenith_src_app_api_facebook_publish_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/facebook/publish/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZmYWNlYm9vayUyRnB1Ymxpc2glMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRmZhY2Vib29rJTJGcHVibGlzaCUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRmZhY2Vib29rJTJGcHVibGlzaCUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRnRlc3QlMkZzdGFydHVwcyUyRnplbml0aCUyRnNyYyUyRmFwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9JTJGVXNlcnMlMkZ0ZXN0JTJGc3RhcnR1cHMlMkZ6ZW5pdGgmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNjO0FBQ2lCO0FBQzlGO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnSEFBbUI7QUFDM0M7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsaUVBQWlFO0FBQ3pFO0FBQ0E7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDdUg7O0FBRXZIIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vemVuaXRoLz8wNDRiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi9Vc2Vycy90ZXN0L3N0YXJ0dXBzL3plbml0aC9zcmMvYXBwL2FwaS9mYWNlYm9vay9wdWJsaXNoL3JvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9mYWNlYm9vay9wdWJsaXNoL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvZmFjZWJvb2svcHVibGlzaFwiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvZmFjZWJvb2svcHVibGlzaC9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIi9Vc2Vycy90ZXN0L3N0YXJ0dXBzL3plbml0aC9zcmMvYXBwL2FwaS9mYWNlYm9vay9wdWJsaXNoL3JvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS9mYWNlYm9vay9wdWJsaXNoL3JvdXRlXCI7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHNlcnZlckhvb2tzLFxuICAgICAgICBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIG9yaWdpbmFsUGF0aG5hbWUsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Ffacebook%2Fpublish%2Froute&page=%2Fapi%2Ffacebook%2Fpublish%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ffacebook%2Fpublish%2Froute.ts&appDir=%2FUsers%2Ftest%2Fstartups%2Fzenith%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Ftest%2Fstartups%2Fzenith&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/facebook/publish/route.ts":
/*!***********************************************!*\
  !*** ./src/app/api/facebook/publish/route.ts ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var _services_facebookService__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/services/facebookService */ \"(rsc)/./src/services/facebookService.ts\");\n\nasync function POST(request) {\n    try {\n        // Parse the request body\n        const { content, pageId, token } = await request.json();\n        console.log(\"Facebook publish endpoint called with:\", {\n            content: content?.substring(0, 50) + \"...\",\n            pageId,\n            hasToken: !!token\n        });\n        if (!content) {\n            return new Response(JSON.stringify({\n                error: \"Content is required\"\n            }), {\n                status: 400,\n                headers: {\n                    \"Content-Type\": \"application/json\"\n                }\n            });\n        }\n        // Publish to Facebook using the service, passing the token and pageId if provided\n        const result = await _services_facebookService__WEBPACK_IMPORTED_MODULE_0__.facebookService.publishPost(content, pageId, token);\n        console.log(\"Facebook publish successful:\", result);\n        return new Response(JSON.stringify(result), {\n            status: 200,\n            headers: {\n                \"Content-Type\": \"application/json\"\n            }\n        });\n    } catch (error) {\n        console.error(\"Error publishing to Facebook:\", error);\n        return new Response(JSON.stringify({\n            error: error.message || \"Failed to publish to Facebook\",\n            details: error.message\n        }), {\n            status: 500,\n            headers: {\n                \"Content-Type\": \"application/json\"\n            }\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS9mYWNlYm9vay9wdWJsaXNoL3JvdXRlLnRzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQTZEO0FBRXRELGVBQWVDLEtBQUtDLE9BQWdCO0lBQ3pDLElBQUk7UUFDRix5QkFBeUI7UUFDekIsTUFBTSxFQUFFQyxPQUFPLEVBQUVDLE1BQU0sRUFBRUMsS0FBSyxFQUFFLEdBQUcsTUFBTUgsUUFBUUksSUFBSTtRQUVyREMsUUFBUUMsR0FBRyxDQUFDLDBDQUEwQztZQUFFTCxTQUFTQSxTQUFTTSxVQUFVLEdBQUcsTUFBTTtZQUFPTDtZQUFRTSxVQUFVLENBQUMsQ0FBQ0w7UUFBTTtRQUU5SCxJQUFJLENBQUNGLFNBQVM7WUFDWixPQUFPLElBQUlRLFNBQVNDLEtBQUtDLFNBQVMsQ0FBQztnQkFBRUMsT0FBTztZQUFzQixJQUFJO2dCQUNwRUMsUUFBUTtnQkFDUkMsU0FBUztvQkFBRSxnQkFBZ0I7Z0JBQW1CO1lBQ2hEO1FBQ0Y7UUFFQSxrRkFBa0Y7UUFDbEYsTUFBTUMsU0FBUyxNQUFNakIsc0VBQWVBLENBQUNrQixXQUFXLENBQUNmLFNBQVNDLFFBQVFDO1FBRWxFRSxRQUFRQyxHQUFHLENBQUMsZ0NBQWdDUztRQUU1QyxPQUFPLElBQUlOLFNBQVNDLEtBQUtDLFNBQVMsQ0FBQ0ksU0FBUztZQUMxQ0YsUUFBUTtZQUNSQyxTQUFTO2dCQUFFLGdCQUFnQjtZQUFtQjtRQUNoRDtJQUNGLEVBQUUsT0FBT0YsT0FBTztRQUNkUCxRQUFRTyxLQUFLLENBQUMsaUNBQWlDQTtRQUMvQyxPQUFPLElBQUlILFNBQVNDLEtBQUtDLFNBQVMsQ0FBQztZQUNqQ0MsT0FBT0EsTUFBTUssT0FBTyxJQUFJO1lBQ3hCQyxTQUFTTixNQUFNSyxPQUFPO1FBQ3hCLElBQUk7WUFDRkosUUFBUTtZQUNSQyxTQUFTO2dCQUFFLGdCQUFnQjtZQUFtQjtRQUNoRDtJQUNGO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly96ZW5pdGgvLi9zcmMvYXBwL2FwaS9mYWNlYm9vay9wdWJsaXNoL3JvdXRlLnRzP2NiM2EiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZmFjZWJvb2tTZXJ2aWNlIH0gZnJvbSAnQC9zZXJ2aWNlcy9mYWNlYm9va1NlcnZpY2UnO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUE9TVChyZXF1ZXN0OiBSZXF1ZXN0KSB7XG4gIHRyeSB7XG4gICAgLy8gUGFyc2UgdGhlIHJlcXVlc3QgYm9keVxuICAgIGNvbnN0IHsgY29udGVudCwgcGFnZUlkLCB0b2tlbiB9ID0gYXdhaXQgcmVxdWVzdC5qc29uKCk7XG4gICAgXG4gICAgY29uc29sZS5sb2coJ0ZhY2Vib29rIHB1Ymxpc2ggZW5kcG9pbnQgY2FsbGVkIHdpdGg6JywgeyBjb250ZW50OiBjb250ZW50Py5zdWJzdHJpbmcoMCwgNTApICsgJy4uLicsIHBhZ2VJZCwgaGFzVG9rZW46ICEhdG9rZW4gfSk7XG4gICAgXG4gICAgaWYgKCFjb250ZW50KSB7XG4gICAgICByZXR1cm4gbmV3IFJlc3BvbnNlKEpTT04uc3RyaW5naWZ5KHsgZXJyb3I6ICdDb250ZW50IGlzIHJlcXVpcmVkJyB9KSwge1xuICAgICAgICBzdGF0dXM6IDQwMCxcbiAgICAgICAgaGVhZGVyczogeyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgICBcbiAgICAvLyBQdWJsaXNoIHRvIEZhY2Vib29rIHVzaW5nIHRoZSBzZXJ2aWNlLCBwYXNzaW5nIHRoZSB0b2tlbiBhbmQgcGFnZUlkIGlmIHByb3ZpZGVkXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZmFjZWJvb2tTZXJ2aWNlLnB1Ymxpc2hQb3N0KGNvbnRlbnQsIHBhZ2VJZCwgdG9rZW4pO1xuICAgIFxuICAgIGNvbnNvbGUubG9nKCdGYWNlYm9vayBwdWJsaXNoIHN1Y2Nlc3NmdWw6JywgcmVzdWx0KTtcbiAgICBcbiAgICByZXR1cm4gbmV3IFJlc3BvbnNlKEpTT04uc3RyaW5naWZ5KHJlc3VsdCksIHtcbiAgICAgIHN0YXR1czogMjAwLFxuICAgICAgaGVhZGVyczogeyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIH1cbiAgICB9KTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBwdWJsaXNoaW5nIHRvIEZhY2Vib29rOicsIGVycm9yKTtcbiAgICByZXR1cm4gbmV3IFJlc3BvbnNlKEpTT04uc3RyaW5naWZ5KHsgXG4gICAgICBlcnJvcjogZXJyb3IubWVzc2FnZSB8fCAnRmFpbGVkIHRvIHB1Ymxpc2ggdG8gRmFjZWJvb2snLFxuICAgICAgZGV0YWlsczogZXJyb3IubWVzc2FnZVxuICAgIH0pLCB7XG4gICAgICBzdGF0dXM6IDUwMCxcbiAgICAgIGhlYWRlcnM6IHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9XG4gICAgfSk7XG4gIH1cbn0iXSwibmFtZXMiOlsiZmFjZWJvb2tTZXJ2aWNlIiwiUE9TVCIsInJlcXVlc3QiLCJjb250ZW50IiwicGFnZUlkIiwidG9rZW4iLCJqc29uIiwiY29uc29sZSIsImxvZyIsInN1YnN0cmluZyIsImhhc1Rva2VuIiwiUmVzcG9uc2UiLCJKU09OIiwic3RyaW5naWZ5IiwiZXJyb3IiLCJzdGF0dXMiLCJoZWFkZXJzIiwicmVzdWx0IiwicHVibGlzaFBvc3QiLCJtZXNzYWdlIiwiZGV0YWlscyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/facebook/publish/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/supabaseClient.ts":
/*!***********************************!*\
  !*** ./src/lib/supabaseClient.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   supabase: () => (/* binding */ supabase)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/supabase-js */ \"(rsc)/./node_modules/@supabase/supabase-js/dist/module/index.js\");\n\nconst supabaseUrl = \"https://qfpvsyhtijwxkmyrqswa.supabase.co\" || 0;\nconst supabaseAnonKey = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZS1kZW1vIiwicm9sZSI6ImFub24iLCJleHAiOjE5ODM4MTI5OTZ9.CRXP1A7WOeoJeXxjNni43kdQwgnWNReilDMblYTn_I0\" || 0;\nconst supabase = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(supabaseUrl, supabaseAnonKey);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL3N1cGFiYXNlQ2xpZW50LnRzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQW9EO0FBRXBELE1BQU1DLGNBQWNDLDBDQUFvQyxJQUFJO0FBQzVELE1BQU1HLGtCQUFrQkgsMkpBQXlDLElBQUk7QUFFOUQsTUFBTUssV0FBV1AsbUVBQVlBLENBQUNDLGFBQWFJLGlCQUFnQiIsInNvdXJjZXMiOlsid2VicGFjazovL3plbml0aC8uL3NyYy9saWIvc3VwYWJhc2VDbGllbnQudHM/ZjlkNyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjcmVhdGVDbGllbnQgfSBmcm9tICdAc3VwYWJhc2Uvc3VwYWJhc2UtanMnXG5cbmNvbnN0IHN1cGFiYXNlVXJsID0gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMIHx8ICdodHRwczovL3FmcHZzeWh0aWp3eGtteXJxc3dhLnN1cGFiYXNlLmNvJ1xuY29uc3Qgc3VwYWJhc2VBbm9uS2V5ID0gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfQU5PTl9LRVkgfHwgJ2V5SmhiR2NpT2lKSVV6STFOaUlzSW5SNWNDSTZJa3BYVkNKOS5leUpwYzNNaU9pSnpkWEJoWW1GelpTMWtaVzF2SWl3aWNtOXNaU0k2SW1GdWIyNGlMQ0psZUhBaU9qRTVPRE00TVRJNU9UWjkuQ1JYUDFBN1dPZW9KZVh4ak5uaTQza2RRd2duV05SZWlsRE1ibFlUbl9JMCdcblxuZXhwb3J0IGNvbnN0IHN1cGFiYXNlID0gY3JlYXRlQ2xpZW50KHN1cGFiYXNlVXJsLCBzdXBhYmFzZUFub25LZXkpIl0sIm5hbWVzIjpbImNyZWF0ZUNsaWVudCIsInN1cGFiYXNlVXJsIiwicHJvY2VzcyIsImVudiIsIk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCIsInN1cGFiYXNlQW5vbktleSIsIk5FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZIiwic3VwYWJhc2UiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/supabaseClient.ts\n");

/***/ }),

/***/ "(rsc)/./src/services/facebookService.ts":
/*!*****************************************!*\
  !*** ./src/services/facebookService.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   facebookService: () => (/* binding */ facebookService),\n/* harmony export */   getFacebookPages: () => (/* binding */ getFacebookPages),\n/* harmony export */   getFacebookProfile: () => (/* binding */ getFacebookProfile),\n/* harmony export */   getFacebookToken: () => (/* binding */ getFacebookToken),\n/* harmony export */   publishToFacebook: () => (/* binding */ publishToFacebook),\n/* harmony export */   testFacebookConnection: () => (/* binding */ testFacebookConnection)\n/* harmony export */ });\n/* harmony import */ var _lib_supabaseClient__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/supabaseClient */ \"(rsc)/./src/lib/supabaseClient.ts\");\n// Facebook Integration Service\n// This service provides a unified interface for all Facebook operations\n\nclass FacebookService {\n    // Get Facebook access token from session or localStorage with better error handling\n    async getAccessToken(overrideToken) {\n        try {\n            console.log(\"=== GET ACCESS TOKEN START ===\");\n            // If an override token is provided (e.g., from server-side API), use it\n            if (overrideToken) {\n                console.log(\"Using override token, length:\", overrideToken.length);\n                // Validate the token before returning\n                const validation = await this.validateToken(overrideToken);\n                if (validation.valid) {\n                    console.log(\"Override token validated successfully\");\n                    return overrideToken;\n                } else {\n                    console.log(\"Override token is invalid:\", validation.error);\n                    throw new Error(`Invalid override token: ${validation.error}`);\n                }\n            }\n            // Try to get from localStorage first (most reliable for client-side)\n            if (false) {}\n            // Get the current user's session\n            const { data: { session }, error: sessionError } = await _lib_supabaseClient__WEBPACK_IMPORTED_MODULE_0__.supabase.auth.getSession();\n            if (sessionError) {\n                console.error(\"Session error:\", sessionError);\n            // Don't throw error, try localStorage fallback\n            }\n            if (!session) {\n                console.log(\"No active Supabase session\");\n            } else {\n                console.log(\"Supabase session found\");\n                // Get the provider token (Facebook access token)\n                const facebookAccessToken = session.provider_token;\n                if (facebookAccessToken) {\n                    console.log(\"Token found in Supabase session, length:\", facebookAccessToken.length);\n                    // Validate the token before returning\n                    const validation = await this.validateToken(facebookAccessToken);\n                    if (validation.valid) {\n                        console.log(\"Session token validated successfully\");\n                        return facebookAccessToken;\n                    } else {\n                        console.log(\"Session token is invalid:\", validation.error);\n                    }\n                }\n            }\n            // Last resort: check localStorage again\n            if (false) {}\n            console.log(\"No Facebook access token found anywhere\");\n            return null;\n        } catch (error) {\n            console.error(\"Error getting Facebook access token:\", error);\n            // Try absolute fallback\n            try {\n                if (false) {}\n            } catch (fallbackError) {\n                console.error(\"Absolute fallback failed:\", fallbackError);\n            }\n            return null;\n        }\n    }\n    // Validate Facebook access token with detailed information\n    async validateToken(token) {\n        try {\n            // First, check basic token validity\n            const response = await fetch(`${this.baseUrl}/me?access_token=${token}&fields=id,name,email`);\n            if (!response.ok) {\n                const errorData = await response.json();\n                return {\n                    valid: false,\n                    error: errorData.error?.message || \"Token invalid\"\n                };\n            }\n            // If basic validation passes, check permissions\n            try {\n                // Check what permissions the token has\n                // Note: For debug_token, we need to use the app access token, but for simplicity,\n                // we'll skip this for now and just return valid\n                console.log(\"Token validation passed, skipping detailed permission check for now\");\n            } catch (debugError) {\n                console.log(\"Could not check token permissions:\", debugError);\n            // Still return valid since basic validation passed\n            }\n            return {\n                valid: true\n            };\n        } catch (error) {\n            console.error(\"Error validating Facebook token:\", error);\n            return {\n                valid: false,\n                error: error.message || \"Token validation failed\"\n            };\n        }\n    }\n    // Get user's Facebook pages with enhanced error handling and fallbacks\n    async getPages() {\n        try {\n            console.log(\"=== GET PAGES METHOD START ===\");\n            // Try to get token from session first\n            let token = null;\n            try {\n                token = await this.getAccessToken();\n                console.log(\"Token from getAccessToken():\", token ? \"Found\" : \"Not found\");\n            } catch (sessionError) {\n                console.log(\"Session token retrieval failed:\", sessionError.message);\n            }\n            // Fallback to direct localStorage access\n            if (!token) {\n                console.log(\"Trying direct localStorage access...\");\n                if (false) {}\n            }\n            if (!token) {\n                throw new Error(\"No Facebook access token available from session or localStorage\");\n            }\n            console.log(\"Using token for pages request\");\n            // Validate token first\n            const validation = await this.validateToken(token);\n            console.log(\"Token validity check:\", validation);\n            if (!validation.valid) {\n                throw new Error(`Facebook access token is invalid or expired: ${validation.error}`);\n            }\n            // Check if token has required permissions\n            if (validation.permissions) {\n                const requiredPermissions = [\n                    \"pages_show_list\",\n                    \"pages_read_engagement\",\n                    \"pages_manage_posts\"\n                ];\n                const missingPermissions = requiredPermissions.filter((perm)=>!validation.permissions.includes(perm));\n                if (missingPermissions.length > 0) {\n                    console.log(\"Warning: Token missing required permissions:\", missingPermissions);\n                } else {\n                    console.log(\"Token has all required permissions\");\n                }\n            }\n            // Get user profile to confirm token works\n            try {\n                const userResponse = await fetch(`${this.baseUrl}/me?access_token=${token}&fields=id,name,email`);\n                const userData = await userResponse.json();\n                if (!userResponse.ok) {\n                    console.error(\"User profile API error:\", userData);\n                    throw new Error(userData.error?.message || \"Failed to fetch user profile\");\n                }\n                console.log(\"User profile retrieved:\", userData.name);\n            } catch (userError) {\n                console.error(\"Error fetching user profile:\", userError);\n            // Continue anyway as we might still get pages\n            }\n            // Get pages using the token\n            console.log(\"Fetching Facebook pages with token...\");\n            const response = await fetch(`${this.baseUrl}/me/accounts?access_token=${token}&fields=name,id,category,picture,fan_count`);\n            const data = await response.json();\n            console.log(\"Pages API response:\", data);\n            if (!response.ok) {\n                console.error(\"Facebook pages API error:\", data);\n                throw new Error(data.error?.message || \"Failed to fetch Facebook pages\");\n            }\n            // Additional debugging - check if we have an empty data array\n            if (data && data.data && Array.isArray(data.data)) {\n                console.log(\"Pages retrieved successfully:\", data.data.length);\n                if (data.data.length === 0) {\n                    console.log(\"Warning: No pages found. This might be due to:\");\n                    console.log(\"1. User has no Facebook pages\");\n                    console.log(\"2. Token lacks pages_show_list permission\");\n                    console.log(\"3. User account is not a business account with page access\");\n                }\n                return data.data;\n            } else {\n                console.log(\"Unexpected response format:\", data);\n                return [];\n            }\n        } catch (error) {\n            console.error(\"Error fetching Facebook pages:\", error);\n            throw error;\n        }\n    }\n    // Get user's Facebook profile\n    async getProfile() {\n        try {\n            const token = await this.getAccessToken();\n            if (!token) {\n                throw new Error(\"No Facebook access token available\");\n            }\n            const response = await fetch(`${this.baseUrl}/me?access_token=${token}&fields=id,name,email,picture`);\n            const data = await response.json();\n            if (!response.ok) {\n                throw new Error(data.error?.message || \"Failed to fetch Facebook profile\");\n            }\n            return data;\n        } catch (error) {\n            console.error(\"Error fetching Facebook profile:\", error);\n            throw error;\n        }\n    }\n    // Upload image to Facebook\n    async uploadImage(base64Image, caption = \"\", pageId, overrideToken) {\n        try {\n            const token = await this.getAccessToken(overrideToken);\n            if (!token) {\n                throw new Error(\"No Facebook access token available. Please reconnect your Facebook account.\");\n            }\n            let accessTokenToUse = token;\n            let url = `${this.baseUrl}/me/photos`;\n            // If a page ID is provided, get the page access token\n            if (pageId) {\n                console.log(\"Fetching page access token for page ID:\", pageId);\n                const pageTokenResponse = await fetch(`${this.baseUrl}/${pageId}?fields=access_token&access_token=${token}`);\n                const pageTokenData = await pageTokenResponse.json();\n                if (!pageTokenResponse.ok) {\n                    console.error(\"Error fetching page access token:\", pageTokenData);\n                    const errorMessage = pageTokenData.error?.message || \"Failed to get page access token\";\n                    throw new Error(`Failed to get page access token: ${errorMessage}`);\n                }\n                accessTokenToUse = pageTokenData.access_token;\n                url = `${this.baseUrl}/${pageId}/photos`;\n                console.log(\"Using page access token for image upload\");\n            } else {\n                console.log(\"Using user access token for image upload to personal feed\");\n            }\n            // For Facebook photo upload, we need to send as form data\n            // First, convert base64 to buffer for server-side usage\n            const imageBuffer = Buffer.from(base64Image, \"base64\");\n            const formData = new FormData();\n            formData.append(\"source\", new Blob([\n                imageBuffer\n            ], {\n                type: \"image/png\"\n            }));\n            if (caption) {\n                formData.append(\"caption\", caption);\n            }\n            formData.append(\"access_token\", accessTokenToUse);\n            console.log(\"Uploading image to Facebook:\", {\n                url,\n                hasCaption: !!caption\n            });\n            // Upload to Facebook\n            const response = await fetch(url, {\n                method: \"POST\",\n                body: formData\n            });\n            const responseData = await response.json();\n            if (!response.ok) {\n                let errorMessage = \"Failed to upload image to Facebook\";\n                if (responseData && responseData.error) {\n                    errorMessage = responseData.error.message || responseData.error.type || errorMessage;\n                    // Log additional error details for debugging\n                    console.error(\"Facebook API error details:\", {\n                        type: responseData.error.type,\n                        code: responseData.error.code,\n                        fbtrace_id: responseData.error.fbtrace_id,\n                        message: responseData.error.message\n                    });\n                }\n                throw new Error(`Facebook API error: ${errorMessage}`);\n            }\n            console.log(\"Image uploaded to Facebook successfully:\", responseData);\n            return {\n                success: true,\n                data: responseData,\n                facebook_post_id: responseData.post_id\n            };\n        } catch (error) {\n            console.error(\"Error uploading image to Facebook:\", error);\n            // Re-throw with more user-friendly message\n            if (error instanceof Error) {\n                throw new Error(`Image upload failed: ${error.message}`);\n            }\n            throw new Error(\"Image upload failed: Unknown error occurred\");\n        }\n    }\n    // Publish post to Facebook (user feed or page)\n    async publishPost(content, pageId, overrideToken) {\n        try {\n            const token = await this.getAccessToken(overrideToken);\n            if (!token) {\n                throw new Error(\"No Facebook access token available. Please reconnect your Facebook account.\");\n            }\n            // Validate the token before attempting to publish\n            const validation = await this.validateToken(token);\n            if (!validation.valid) {\n                throw new Error(`Facebook access token is invalid: ${validation.error || \"Unknown error\"}. Please reconnect your Facebook account.`);\n            }\n            let accessTokenToUse = token;\n            let url = `${this.baseUrl}/me/feed`;\n            // If a page ID is provided, get the page access token\n            if (pageId) {\n                console.log(\"Fetching page access token for page ID:\", pageId);\n                const pageTokenResponse = await fetch(`${this.baseUrl}/${pageId}?fields=access_token&access_token=${token}`);\n                const pageTokenData = await pageTokenResponse.json();\n                if (!pageTokenResponse.ok) {\n                    console.error(\"Error fetching page access token:\", pageTokenData);\n                    const errorMessage = pageTokenData.error?.message || \"Failed to get page access token\";\n                    throw new Error(`Failed to get page access token: ${errorMessage}`);\n                }\n                accessTokenToUse = pageTokenData.access_token;\n                url = `${this.baseUrl}/${pageId}/feed`;\n                console.log(\"Using page access token for publishing\");\n            } else {\n                console.log(\"Using user access token for publishing to personal feed\");\n            }\n            // Prepare the post data\n            const postData = {\n                message: content,\n                access_token: accessTokenToUse\n            };\n            console.log(\"Publishing to Facebook:\", {\n                url,\n                hasMessage: !!postData.message\n            });\n            // Publish to Facebook\n            const response = await fetch(url, {\n                method: \"POST\",\n                headers: {\n                    \"Content-Type\": \"application/json\"\n                },\n                body: JSON.stringify(postData)\n            });\n            const responseData = await response.json();\n            if (!response.ok) {\n                let errorMessage = \"Failed to publish to Facebook\";\n                if (responseData && responseData.error) {\n                    errorMessage = responseData.error.message || responseData.error.type || errorMessage;\n                    // Log additional error details for debugging\n                    console.error(\"Facebook API error details:\", {\n                        type: responseData.error.type,\n                        code: responseData.error.code,\n                        fbtrace_id: responseData.error.fbtrace_id,\n                        message: responseData.error.message\n                    });\n                }\n                throw new Error(`Facebook API error: ${errorMessage}`);\n            }\n            console.log(\"Post published to Facebook successfully:\", responseData);\n            return {\n                success: true,\n                data: responseData,\n                facebook_post_id: responseData.id\n            };\n        } catch (error) {\n            console.error(\"Error publishing to Facebook:\", error);\n            // Re-throw with more user-friendly message\n            if (error instanceof Error) {\n                throw new Error(`Publish failed: ${error.message}`);\n            }\n            throw new Error(\"Publish failed: Unknown error occurred\");\n        }\n    }\n    // Test Facebook connection\n    async testConnection() {\n        try {\n            const token = await this.getAccessToken();\n            if (!token) {\n                return {\n                    connected: false\n                };\n            }\n            // Validate token\n            const validation = await this.validateToken(token);\n            if (!validation.valid) {\n                return {\n                    connected: false\n                };\n            }\n            // Get user profile\n            const profile = await this.getProfile();\n            // Get pages\n            const pages = await this.getPages();\n            return {\n                connected: true,\n                user: profile,\n                pages: pages,\n                tokenInfo: validation\n            };\n        } catch (error) {\n            console.error(\"Error testing Facebook connection:\", error);\n            return {\n                connected: false\n            };\n        }\n    }\n    constructor(){\n        this.baseUrl = \"https://graph.facebook.com/v19.0\";\n    }\n}\n// Export singleton instance\nconst facebookService = new FacebookService();\n// Export individual functions for direct use\nconst getFacebookToken = ()=>facebookService.getAccessToken();\nconst getFacebookPages = ()=>facebookService.getPages();\nconst getFacebookProfile = ()=>facebookService.getProfile();\nconst publishToFacebook = (content, pageId)=>facebookService.publishPost(content, pageId);\nconst testFacebookConnection = ()=>facebookService.testConnection();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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UXZELFVBQVU7O0FBK2RwQjtBQUVBLDRCQUE0QjtBQUNyQixNQUFNNEQsa0JBQWtCLElBQUl2RixrQkFBa0I7QUFFckQsNkNBQTZDO0FBQ3RDLE1BQU13RixtQkFBbUIsSUFBTUQsZ0JBQWdCdEYsY0FBYyxHQUFHO0FBQ2hFLE1BQU13RixtQkFBbUIsSUFBTUYsZ0JBQWdCdEQsUUFBUSxHQUFHO0FBQzFELE1BQU15RCxxQkFBcUIsSUFBTUgsZ0JBQWdCMUMsVUFBVSxHQUFHO0FBQzlELE1BQU04QyxvQkFBb0IsQ0FBQ2pCLFNBQWlCekIsU0FDakRzQyxnQkFBZ0JkLFdBQVcsQ0FBQ0MsU0FBU3pCLFFBQVE7QUFDeEMsTUFBTTJDLHlCQUF5QixJQUFNTCxnQkFBZ0JOLGNBQWMsR0FBRyIsInNvdXJjZXMiOlsid2VicGFjazovL3plbml0aC8uL3NyYy9zZXJ2aWNlcy9mYWNlYm9va1NlcnZpY2UudHM/ZTQ2OSJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBGYWNlYm9vayBJbnRlZ3JhdGlvbiBTZXJ2aWNlXG4vLyBUaGlzIHNlcnZpY2UgcHJvdmlkZXMgYSB1bmlmaWVkIGludGVyZmFjZSBmb3IgYWxsIEZhY2Vib29rIG9wZXJhdGlvbnNcblxuaW1wb3J0IHsgc3VwYWJhc2UgfSBmcm9tICdAL2xpYi9zdXBhYmFzZUNsaWVudCc7XG5cbmNsYXNzIEZhY2Vib29rU2VydmljZSB7XG4gIHByaXZhdGUgYmFzZVVybCA9ICdodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS92MTkuMCc7XG5cbiAgLy8gR2V0IEZhY2Vib29rIGFjY2VzcyB0b2tlbiBmcm9tIHNlc3Npb24gb3IgbG9jYWxTdG9yYWdlIHdpdGggYmV0dGVyIGVycm9yIGhhbmRsaW5nXG4gIGFzeW5jIGdldEFjY2Vzc1Rva2VuKG92ZXJyaWRlVG9rZW4/OiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZyB8IG51bGw+IHtcbiAgICB0cnkge1xuICAgICAgY29uc29sZS5sb2coJz09PSBHRVQgQUNDRVNTIFRPS0VOIFNUQVJUID09PScpO1xuICAgICAgXG4gICAgICAvLyBJZiBhbiBvdmVycmlkZSB0b2tlbiBpcyBwcm92aWRlZCAoZS5nLiwgZnJvbSBzZXJ2ZXItc2lkZSBBUEkpLCB1c2UgaXRcbiAgICAgIGlmIChvdmVycmlkZVRva2VuKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdVc2luZyBvdmVycmlkZSB0b2tlbiwgbGVuZ3RoOicsIG92ZXJyaWRlVG9rZW4ubGVuZ3RoKTtcbiAgICAgICAgLy8gVmFsaWRhdGUgdGhlIHRva2VuIGJlZm9yZSByZXR1cm5pbmdcbiAgICAgICAgY29uc3QgdmFsaWRhdGlvbiA9IGF3YWl0IHRoaXMudmFsaWRhdGVUb2tlbihvdmVycmlkZVRva2VuKTtcbiAgICAgICAgaWYgKHZhbGlkYXRpb24udmFsaWQpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygnT3ZlcnJpZGUgdG9rZW4gdmFsaWRhdGVkIHN1Y2Nlc3NmdWxseScpO1xuICAgICAgICAgIHJldHVybiBvdmVycmlkZVRva2VuO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdPdmVycmlkZSB0b2tlbiBpcyBpbnZhbGlkOicsIHZhbGlkYXRpb24uZXJyb3IpO1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBvdmVycmlkZSB0b2tlbjogJHt2YWxpZGF0aW9uLmVycm9yfWApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIFRyeSB0byBnZXQgZnJvbSBsb2NhbFN0b3JhZ2UgZmlyc3QgKG1vc3QgcmVsaWFibGUgZm9yIGNsaWVudC1zaWRlKVxuICAgICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGNvbnN0IHN0b3JlZFRva2VuID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2ZhY2Vib29rX2FjY2Vzc190b2tlbicpO1xuICAgICAgICBpZiAoc3RvcmVkVG9rZW4pIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygnVG9rZW4gZm91bmQgaW4gbG9jYWxTdG9yYWdlLCBsZW5ndGg6Jywgc3RvcmVkVG9rZW4ubGVuZ3RoKTtcbiAgICAgICAgICAvLyBWYWxpZGF0ZSB0b2tlbiBiZWZvcmUgcmV0dXJuaW5nXG4gICAgICAgICAgY29uc3QgdmFsaWRhdGlvbiA9IGF3YWl0IHRoaXMudmFsaWRhdGVUb2tlbihzdG9yZWRUb2tlbik7XG4gICAgICAgICAgaWYgKHZhbGlkYXRpb24udmFsaWQpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdUb2tlbiB2YWxpZGF0ZWQgc3VjY2Vzc2Z1bGx5Jyk7XG4gICAgICAgICAgICBpZiAodmFsaWRhdGlvbi5wZXJtaXNzaW9ucykge1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZygnVG9rZW4gcGVybWlzc2lvbnM6JywgdmFsaWRhdGlvbi5wZXJtaXNzaW9ucyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gc3RvcmVkVG9rZW47XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdTdG9yZWQgdG9rZW4gaXMgaW52YWxpZCwgcmVtb3ZpbmcgaXQ6JywgdmFsaWRhdGlvbi5lcnJvcik7XG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgnZmFjZWJvb2tfYWNjZXNzX3Rva2VuJyk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIEdldCB0aGUgY3VycmVudCB1c2VyJ3Mgc2Vzc2lvblxuICAgICAgY29uc3QgeyBkYXRhOiB7IHNlc3Npb24gfSwgZXJyb3I6IHNlc3Npb25FcnJvciB9ID0gYXdhaXQgc3VwYWJhc2UuYXV0aC5nZXRTZXNzaW9uKCk7XG4gICAgICBcbiAgICAgIGlmIChzZXNzaW9uRXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignU2Vzc2lvbiBlcnJvcjonLCBzZXNzaW9uRXJyb3IpO1xuICAgICAgICAvLyBEb24ndCB0aHJvdyBlcnJvciwgdHJ5IGxvY2FsU3RvcmFnZSBmYWxsYmFja1xuICAgICAgfVxuICAgICAgXG4gICAgICBpZiAoIXNlc3Npb24pIHtcbiAgICAgICAgY29uc29sZS5sb2coJ05vIGFjdGl2ZSBTdXBhYmFzZSBzZXNzaW9uJyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zb2xlLmxvZygnU3VwYWJhc2Ugc2Vzc2lvbiBmb3VuZCcpO1xuICAgICAgICBcbiAgICAgICAgLy8gR2V0IHRoZSBwcm92aWRlciB0b2tlbiAoRmFjZWJvb2sgYWNjZXNzIHRva2VuKVxuICAgICAgICBjb25zdCBmYWNlYm9va0FjY2Vzc1Rva2VuID0gc2Vzc2lvbi5wcm92aWRlcl90b2tlbjtcbiAgICAgICAgXG4gICAgICAgIGlmIChmYWNlYm9va0FjY2Vzc1Rva2VuKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ1Rva2VuIGZvdW5kIGluIFN1cGFiYXNlIHNlc3Npb24sIGxlbmd0aDonLCBmYWNlYm9va0FjY2Vzc1Rva2VuLmxlbmd0aCk7XG4gICAgICAgICAgLy8gVmFsaWRhdGUgdGhlIHRva2VuIGJlZm9yZSByZXR1cm5pbmdcbiAgICAgICAgICBjb25zdCB2YWxpZGF0aW9uID0gYXdhaXQgdGhpcy52YWxpZGF0ZVRva2VuKGZhY2Vib29rQWNjZXNzVG9rZW4pO1xuICAgICAgICAgIGlmICh2YWxpZGF0aW9uLnZhbGlkKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnU2Vzc2lvbiB0b2tlbiB2YWxpZGF0ZWQgc3VjY2Vzc2Z1bGx5Jyk7XG4gICAgICAgICAgICByZXR1cm4gZmFjZWJvb2tBY2Nlc3NUb2tlbjtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ1Nlc3Npb24gdG9rZW4gaXMgaW52YWxpZDonLCB2YWxpZGF0aW9uLmVycm9yKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gTGFzdCByZXNvcnQ6IGNoZWNrIGxvY2FsU3RvcmFnZSBhZ2FpblxuICAgICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGNvbnN0IHN0b3JlZFRva2VuID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2ZhY2Vib29rX2FjY2Vzc190b2tlbicpO1xuICAgICAgICBpZiAoc3RvcmVkVG9rZW4pIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygnRW1lcmdlbmN5IGZhbGxiYWNrOiBUb2tlbiBmb3VuZCBpbiBsb2NhbFN0b3JhZ2UsIGxlbmd0aDonLCBzdG9yZWRUb2tlbi5sZW5ndGgpO1xuICAgICAgICAgIHJldHVybiBzdG9yZWRUb2tlbjtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgXG4gICAgICBjb25zb2xlLmxvZygnTm8gRmFjZWJvb2sgYWNjZXNzIHRva2VuIGZvdW5kIGFueXdoZXJlJyk7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZ2V0dGluZyBGYWNlYm9vayBhY2Nlc3MgdG9rZW46JywgZXJyb3IpO1xuICAgICAgLy8gVHJ5IGFic29sdXRlIGZhbGxiYWNrXG4gICAgICB0cnkge1xuICAgICAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICBjb25zdCBzdG9yZWRUb2tlbiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdmYWNlYm9va19hY2Nlc3NfdG9rZW4nKTtcbiAgICAgICAgICBpZiAoc3RvcmVkVG9rZW4pIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdBYnNvbHV0ZSBlbWVyZ2VuY3kgZmFsbGJhY2s6IFRva2VuIGZvdW5kIGluIGxvY2FsU3RvcmFnZSwgbGVuZ3RoOicsIHN0b3JlZFRva2VuLmxlbmd0aCk7XG4gICAgICAgICAgICByZXR1cm4gc3RvcmVkVG9rZW47XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChmYWxsYmFja0Vycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Fic29sdXRlIGZhbGxiYWNrIGZhaWxlZDonLCBmYWxsYmFja0Vycm9yKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfVxuXG4gIC8vIFZhbGlkYXRlIEZhY2Vib29rIGFjY2VzcyB0b2tlbiB3aXRoIGRldGFpbGVkIGluZm9ybWF0aW9uXG4gIGFzeW5jIHZhbGlkYXRlVG9rZW4odG9rZW46IHN0cmluZyk6IFByb21pc2U8e3ZhbGlkOiBib29sZWFuOyBwZXJtaXNzaW9ucz86IHN0cmluZ1tdOyBlcnJvcj86IHN0cmluZ30+IHtcbiAgICB0cnkge1xuICAgICAgLy8gRmlyc3QsIGNoZWNrIGJhc2ljIHRva2VuIHZhbGlkaXR5XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKFxuICAgICAgICBgJHt0aGlzLmJhc2VVcmx9L21lP2FjY2Vzc190b2tlbj0ke3Rva2VufSZmaWVsZHM9aWQsbmFtZSxlbWFpbGBcbiAgICAgICk7XG4gICAgICBcbiAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgY29uc3QgZXJyb3JEYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHZhbGlkOiBmYWxzZSxcbiAgICAgICAgICBlcnJvcjogZXJyb3JEYXRhLmVycm9yPy5tZXNzYWdlIHx8ICdUb2tlbiBpbnZhbGlkJ1xuICAgICAgICB9O1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBJZiBiYXNpYyB2YWxpZGF0aW9uIHBhc3NlcywgY2hlY2sgcGVybWlzc2lvbnNcbiAgICAgIHRyeSB7XG4gICAgICAgIC8vIENoZWNrIHdoYXQgcGVybWlzc2lvbnMgdGhlIHRva2VuIGhhc1xuICAgICAgICAvLyBOb3RlOiBGb3IgZGVidWdfdG9rZW4sIHdlIG5lZWQgdG8gdXNlIHRoZSBhcHAgYWNjZXNzIHRva2VuLCBidXQgZm9yIHNpbXBsaWNpdHksXG4gICAgICAgIC8vIHdlJ2xsIHNraXAgdGhpcyBmb3Igbm93IGFuZCBqdXN0IHJldHVybiB2YWxpZFxuICAgICAgICBjb25zb2xlLmxvZygnVG9rZW4gdmFsaWRhdGlvbiBwYXNzZWQsIHNraXBwaW5nIGRldGFpbGVkIHBlcm1pc3Npb24gY2hlY2sgZm9yIG5vdycpO1xuICAgICAgfSBjYXRjaCAoZGVidWdFcnJvcikge1xuICAgICAgICBjb25zb2xlLmxvZygnQ291bGQgbm90IGNoZWNrIHRva2VuIHBlcm1pc3Npb25zOicsIGRlYnVnRXJyb3IpO1xuICAgICAgICAvLyBTdGlsbCByZXR1cm4gdmFsaWQgc2luY2UgYmFzaWMgdmFsaWRhdGlvbiBwYXNzZWRcbiAgICAgIH1cbiAgICAgIFxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdmFsaWQ6IHRydWVcbiAgICAgIH07XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHZhbGlkYXRpbmcgRmFjZWJvb2sgdG9rZW46JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdmFsaWQ6IGZhbHNlLFxuICAgICAgICBlcnJvcjogZXJyb3IubWVzc2FnZSB8fCAnVG9rZW4gdmFsaWRhdGlvbiBmYWlsZWQnXG4gICAgICB9O1xuICAgIH1cbiAgfVxuXG4gIC8vIEdldCB1c2VyJ3MgRmFjZWJvb2sgcGFnZXMgd2l0aCBlbmhhbmNlZCBlcnJvciBoYW5kbGluZyBhbmQgZmFsbGJhY2tzXG4gIGFzeW5jIGdldFBhZ2VzKCk6IFByb21pc2U8YW55W10+IHtcbiAgICB0cnkge1xuICAgICAgY29uc29sZS5sb2coJz09PSBHRVQgUEFHRVMgTUVUSE9EIFNUQVJUID09PScpO1xuICAgICAgXG4gICAgICAvLyBUcnkgdG8gZ2V0IHRva2VuIGZyb20gc2Vzc2lvbiBmaXJzdFxuICAgICAgbGV0IHRva2VuOiBzdHJpbmcgfCBudWxsID0gbnVsbDtcbiAgICAgIHRyeSB7XG4gICAgICAgIHRva2VuID0gYXdhaXQgdGhpcy5nZXRBY2Nlc3NUb2tlbigpO1xuICAgICAgICBjb25zb2xlLmxvZygnVG9rZW4gZnJvbSBnZXRBY2Nlc3NUb2tlbigpOicsIHRva2VuID8gJ0ZvdW5kJyA6ICdOb3QgZm91bmQnKTtcbiAgICAgIH0gY2F0Y2ggKHNlc3Npb25FcnJvcikge1xuICAgICAgICBjb25zb2xlLmxvZygnU2Vzc2lvbiB0b2tlbiByZXRyaWV2YWwgZmFpbGVkOicsIHNlc3Npb25FcnJvci5tZXNzYWdlKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gRmFsbGJhY2sgdG8gZGlyZWN0IGxvY2FsU3RvcmFnZSBhY2Nlc3NcbiAgICAgIGlmICghdG9rZW4pIHtcbiAgICAgICAgY29uc29sZS5sb2coJ1RyeWluZyBkaXJlY3QgbG9jYWxTdG9yYWdlIGFjY2Vzcy4uLicpO1xuICAgICAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICBjb25zdCBzdG9yZWRUb2tlbiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdmYWNlYm9va19hY2Nlc3NfdG9rZW4nKTtcbiAgICAgICAgICBpZiAoc3RvcmVkVG9rZW4pIHtcbiAgICAgICAgICAgIHRva2VuID0gc3RvcmVkVG9rZW47XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnVG9rZW4gZm91bmQgZGlyZWN0bHkgaW4gbG9jYWxTdG9yYWdlJyk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBcbiAgICAgIGlmICghdG9rZW4pIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyBGYWNlYm9vayBhY2Nlc3MgdG9rZW4gYXZhaWxhYmxlIGZyb20gc2Vzc2lvbiBvciBsb2NhbFN0b3JhZ2UnKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgY29uc29sZS5sb2coJ1VzaW5nIHRva2VuIGZvciBwYWdlcyByZXF1ZXN0Jyk7XG4gICAgICBcbiAgICAgIC8vIFZhbGlkYXRlIHRva2VuIGZpcnN0XG4gICAgICBjb25zdCB2YWxpZGF0aW9uID0gYXdhaXQgdGhpcy52YWxpZGF0ZVRva2VuKHRva2VuKTtcbiAgICAgIGNvbnNvbGUubG9nKCdUb2tlbiB2YWxpZGl0eSBjaGVjazonLCB2YWxpZGF0aW9uKTtcbiAgICAgIFxuICAgICAgaWYgKCF2YWxpZGF0aW9uLnZhbGlkKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgRmFjZWJvb2sgYWNjZXNzIHRva2VuIGlzIGludmFsaWQgb3IgZXhwaXJlZDogJHt2YWxpZGF0aW9uLmVycm9yfWApO1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBDaGVjayBpZiB0b2tlbiBoYXMgcmVxdWlyZWQgcGVybWlzc2lvbnNcbiAgICAgIGlmICh2YWxpZGF0aW9uLnBlcm1pc3Npb25zKSB7XG4gICAgICAgIGNvbnN0IHJlcXVpcmVkUGVybWlzc2lvbnMgPSBbJ3BhZ2VzX3Nob3dfbGlzdCcsICdwYWdlc19yZWFkX2VuZ2FnZW1lbnQnLCAncGFnZXNfbWFuYWdlX3Bvc3RzJ107XG4gICAgICAgIGNvbnN0IG1pc3NpbmdQZXJtaXNzaW9ucyA9IHJlcXVpcmVkUGVybWlzc2lvbnMuZmlsdGVyKFxuICAgICAgICAgIHBlcm0gPT4gIXZhbGlkYXRpb24ucGVybWlzc2lvbnMuaW5jbHVkZXMocGVybSlcbiAgICAgICAgKTtcbiAgICAgICAgXG4gICAgICAgIGlmIChtaXNzaW5nUGVybWlzc2lvbnMubGVuZ3RoID4gMCkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdXYXJuaW5nOiBUb2tlbiBtaXNzaW5nIHJlcXVpcmVkIHBlcm1pc3Npb25zOicsIG1pc3NpbmdQZXJtaXNzaW9ucyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ1Rva2VuIGhhcyBhbGwgcmVxdWlyZWQgcGVybWlzc2lvbnMnKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBHZXQgdXNlciBwcm9maWxlIHRvIGNvbmZpcm0gdG9rZW4gd29ya3NcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHVzZXJSZXNwb25zZSA9IGF3YWl0IGZldGNoKFxuICAgICAgICAgIGAke3RoaXMuYmFzZVVybH0vbWU/YWNjZXNzX3Rva2VuPSR7dG9rZW59JmZpZWxkcz1pZCxuYW1lLGVtYWlsYFxuICAgICAgICApO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgdXNlckRhdGEgPSBhd2FpdCB1c2VyUmVzcG9uc2UuanNvbigpO1xuICAgICAgICBcbiAgICAgICAgaWYgKCF1c2VyUmVzcG9uc2Uub2spIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdVc2VyIHByb2ZpbGUgQVBJIGVycm9yOicsIHVzZXJEYXRhKTtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IodXNlckRhdGEuZXJyb3I/Lm1lc3NhZ2UgfHwgJ0ZhaWxlZCB0byBmZXRjaCB1c2VyIHByb2ZpbGUnKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgY29uc29sZS5sb2coJ1VzZXIgcHJvZmlsZSByZXRyaWV2ZWQ6JywgdXNlckRhdGEubmFtZSk7XG4gICAgICB9IGNhdGNoICh1c2VyRXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgdXNlciBwcm9maWxlOicsIHVzZXJFcnJvcik7XG4gICAgICAgIC8vIENvbnRpbnVlIGFueXdheSBhcyB3ZSBtaWdodCBzdGlsbCBnZXQgcGFnZXNcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gR2V0IHBhZ2VzIHVzaW5nIHRoZSB0b2tlblxuICAgICAgY29uc29sZS5sb2coJ0ZldGNoaW5nIEZhY2Vib29rIHBhZ2VzIHdpdGggdG9rZW4uLi4nKTtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goXG4gICAgICAgIGAke3RoaXMuYmFzZVVybH0vbWUvYWNjb3VudHM/YWNjZXNzX3Rva2VuPSR7dG9rZW59JmZpZWxkcz1uYW1lLGlkLGNhdGVnb3J5LHBpY3R1cmUsZmFuX2NvdW50YFxuICAgICAgKTtcbiAgICAgIFxuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgIGNvbnNvbGUubG9nKCdQYWdlcyBBUEkgcmVzcG9uc2U6JywgZGF0YSk7XG4gICAgICBcbiAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRmFjZWJvb2sgcGFnZXMgQVBJIGVycm9yOicsIGRhdGEpO1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZGF0YS5lcnJvcj8ubWVzc2FnZSB8fCAnRmFpbGVkIHRvIGZldGNoIEZhY2Vib29rIHBhZ2VzJyk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIEFkZGl0aW9uYWwgZGVidWdnaW5nIC0gY2hlY2sgaWYgd2UgaGF2ZSBhbiBlbXB0eSBkYXRhIGFycmF5XG4gICAgICBpZiAoZGF0YSAmJiBkYXRhLmRhdGEgJiYgQXJyYXkuaXNBcnJheShkYXRhLmRhdGEpKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdQYWdlcyByZXRyaWV2ZWQgc3VjY2Vzc2Z1bGx5OicsIGRhdGEuZGF0YS5sZW5ndGgpO1xuICAgICAgICBpZiAoZGF0YS5kYXRhLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdXYXJuaW5nOiBObyBwYWdlcyBmb3VuZC4gVGhpcyBtaWdodCBiZSBkdWUgdG86Jyk7XG4gICAgICAgICAgY29uc29sZS5sb2coJzEuIFVzZXIgaGFzIG5vIEZhY2Vib29rIHBhZ2VzJyk7XG4gICAgICAgICAgY29uc29sZS5sb2coJzIuIFRva2VuIGxhY2tzIHBhZ2VzX3Nob3dfbGlzdCBwZXJtaXNzaW9uJyk7XG4gICAgICAgICAgY29uc29sZS5sb2coJzMuIFVzZXIgYWNjb3VudCBpcyBub3QgYSBidXNpbmVzcyBhY2NvdW50IHdpdGggcGFnZSBhY2Nlc3MnKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZGF0YS5kYXRhO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc29sZS5sb2coJ1VuZXhwZWN0ZWQgcmVzcG9uc2UgZm9ybWF0OicsIGRhdGEpO1xuICAgICAgICByZXR1cm4gW107XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIEZhY2Vib29rIHBhZ2VzOicsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIC8vIEdldCB1c2VyJ3MgRmFjZWJvb2sgcHJvZmlsZVxuICBhc3luYyBnZXRQcm9maWxlKCk6IFByb21pc2U8YW55PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHRva2VuID0gYXdhaXQgdGhpcy5nZXRBY2Nlc3NUb2tlbigpO1xuICAgICAgaWYgKCF0b2tlbikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIEZhY2Vib29rIGFjY2VzcyB0b2tlbiBhdmFpbGFibGUnKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChcbiAgICAgICAgYCR7dGhpcy5iYXNlVXJsfS9tZT9hY2Nlc3NfdG9rZW49JHt0b2tlbn0mZmllbGRzPWlkLG5hbWUsZW1haWwscGljdHVyZWBcbiAgICAgICk7XG4gICAgICBcbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICBcbiAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGRhdGEuZXJyb3I/Lm1lc3NhZ2UgfHwgJ0ZhaWxlZCB0byBmZXRjaCBGYWNlYm9vayBwcm9maWxlJyk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIHJldHVybiBkYXRhO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBGYWNlYm9vayBwcm9maWxlOicsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIC8vIFVwbG9hZCBpbWFnZSB0byBGYWNlYm9va1xuICBhc3luYyB1cGxvYWRJbWFnZShiYXNlNjRJbWFnZTogc3RyaW5nLCBjYXB0aW9uOiBzdHJpbmcgPSAnJywgcGFnZUlkPzogc3RyaW5nLCBvdmVycmlkZVRva2VuPzogc3RyaW5nKTogUHJvbWlzZTxhbnk+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgdG9rZW4gPSBhd2FpdCB0aGlzLmdldEFjY2Vzc1Rva2VuKG92ZXJyaWRlVG9rZW4pO1xuICAgICAgaWYgKCF0b2tlbikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIEZhY2Vib29rIGFjY2VzcyB0b2tlbiBhdmFpbGFibGUuIFBsZWFzZSByZWNvbm5lY3QgeW91ciBGYWNlYm9vayBhY2NvdW50LicpO1xuICAgICAgfVxuICAgICAgXG4gICAgICBsZXQgYWNjZXNzVG9rZW5Ub1VzZSA9IHRva2VuO1xuICAgICAgbGV0IHVybCA9IGAke3RoaXMuYmFzZVVybH0vbWUvcGhvdG9zYDtcbiAgICAgIFxuICAgICAgLy8gSWYgYSBwYWdlIElEIGlzIHByb3ZpZGVkLCBnZXQgdGhlIHBhZ2UgYWNjZXNzIHRva2VuXG4gICAgICBpZiAocGFnZUlkKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdGZXRjaGluZyBwYWdlIGFjY2VzcyB0b2tlbiBmb3IgcGFnZSBJRDonLCBwYWdlSWQpO1xuICAgICAgICBjb25zdCBwYWdlVG9rZW5SZXNwb25zZSA9IGF3YWl0IGZldGNoKFxuICAgICAgICAgIGAke3RoaXMuYmFzZVVybH0vJHtwYWdlSWR9P2ZpZWxkcz1hY2Nlc3NfdG9rZW4mYWNjZXNzX3Rva2VuPSR7dG9rZW59YFxuICAgICAgICApO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgcGFnZVRva2VuRGF0YSA9IGF3YWl0IHBhZ2VUb2tlblJlc3BvbnNlLmpzb24oKTtcbiAgICAgICAgXG4gICAgICAgIGlmICghcGFnZVRva2VuUmVzcG9uc2Uub2spIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBwYWdlIGFjY2VzcyB0b2tlbjonLCBwYWdlVG9rZW5EYXRhKTtcbiAgICAgICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSBwYWdlVG9rZW5EYXRhLmVycm9yPy5tZXNzYWdlIHx8ICdGYWlsZWQgdG8gZ2V0IHBhZ2UgYWNjZXNzIHRva2VuJztcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBnZXQgcGFnZSBhY2Nlc3MgdG9rZW46ICR7ZXJyb3JNZXNzYWdlfWApO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBhY2Nlc3NUb2tlblRvVXNlID0gcGFnZVRva2VuRGF0YS5hY2Nlc3NfdG9rZW47XG4gICAgICAgIHVybCA9IGAke3RoaXMuYmFzZVVybH0vJHtwYWdlSWR9L3Bob3Rvc2A7XG4gICAgICAgIGNvbnNvbGUubG9nKCdVc2luZyBwYWdlIGFjY2VzcyB0b2tlbiBmb3IgaW1hZ2UgdXBsb2FkJyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zb2xlLmxvZygnVXNpbmcgdXNlciBhY2Nlc3MgdG9rZW4gZm9yIGltYWdlIHVwbG9hZCB0byBwZXJzb25hbCBmZWVkJyk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIEZvciBGYWNlYm9vayBwaG90byB1cGxvYWQsIHdlIG5lZWQgdG8gc2VuZCBhcyBmb3JtIGRhdGFcbiAgICAgIC8vIEZpcnN0LCBjb252ZXJ0IGJhc2U2NCB0byBidWZmZXIgZm9yIHNlcnZlci1zaWRlIHVzYWdlXG4gICAgICBjb25zdCBpbWFnZUJ1ZmZlciA9IEJ1ZmZlci5mcm9tKGJhc2U2NEltYWdlLCAnYmFzZTY0Jyk7XG4gICAgICBcbiAgICAgIGNvbnN0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7XG4gICAgICBmb3JtRGF0YS5hcHBlbmQoJ3NvdXJjZScsIG5ldyBCbG9iKFtpbWFnZUJ1ZmZlcl0sIHsgdHlwZTogJ2ltYWdlL3BuZycgfSkpO1xuICAgICAgaWYgKGNhcHRpb24pIHtcbiAgICAgICAgZm9ybURhdGEuYXBwZW5kKCdjYXB0aW9uJywgY2FwdGlvbik7XG4gICAgICB9XG4gICAgICBmb3JtRGF0YS5hcHBlbmQoJ2FjY2Vzc190b2tlbicsIGFjY2Vzc1Rva2VuVG9Vc2UpO1xuICAgICAgXG4gICAgICBjb25zb2xlLmxvZygnVXBsb2FkaW5nIGltYWdlIHRvIEZhY2Vib29rOicsIHsgdXJsLCBoYXNDYXB0aW9uOiAhIWNhcHRpb24gfSk7XG4gICAgICBcbiAgICAgIC8vIFVwbG9hZCB0byBGYWNlYm9va1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh1cmwsIHtcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgIGJvZHk6IGZvcm1EYXRhXG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgY29uc3QgcmVzcG9uc2VEYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgXG4gICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgIGxldCBlcnJvck1lc3NhZ2UgPSAnRmFpbGVkIHRvIHVwbG9hZCBpbWFnZSB0byBGYWNlYm9vayc7XG4gICAgICAgIGlmIChyZXNwb25zZURhdGEgJiYgcmVzcG9uc2VEYXRhLmVycm9yKSB7XG4gICAgICAgICAgZXJyb3JNZXNzYWdlID0gcmVzcG9uc2VEYXRhLmVycm9yLm1lc3NhZ2UgfHwgcmVzcG9uc2VEYXRhLmVycm9yLnR5cGUgfHwgZXJyb3JNZXNzYWdlO1xuICAgICAgICAgIC8vIExvZyBhZGRpdGlvbmFsIGVycm9yIGRldGFpbHMgZm9yIGRlYnVnZ2luZ1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhY2Vib29rIEFQSSBlcnJvciBkZXRhaWxzOicsIHtcbiAgICAgICAgICAgIHR5cGU6IHJlc3BvbnNlRGF0YS5lcnJvci50eXBlLFxuICAgICAgICAgICAgY29kZTogcmVzcG9uc2VEYXRhLmVycm9yLmNvZGUsXG4gICAgICAgICAgICBmYnRyYWNlX2lkOiByZXNwb25zZURhdGEuZXJyb3IuZmJ0cmFjZV9pZCxcbiAgICAgICAgICAgIG1lc3NhZ2U6IHJlc3BvbnNlRGF0YS5lcnJvci5tZXNzYWdlXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgRmFjZWJvb2sgQVBJIGVycm9yOiAke2Vycm9yTWVzc2FnZX1gKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgY29uc29sZS5sb2coJ0ltYWdlIHVwbG9hZGVkIHRvIEZhY2Vib29rIHN1Y2Nlc3NmdWxseTonLCByZXNwb25zZURhdGEpO1xuICAgICAgXG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICBkYXRhOiByZXNwb25zZURhdGEsXG4gICAgICAgIGZhY2Vib29rX3Bvc3RfaWQ6IHJlc3BvbnNlRGF0YS5wb3N0X2lkXG4gICAgICB9O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciB1cGxvYWRpbmcgaW1hZ2UgdG8gRmFjZWJvb2s6JywgZXJyb3IpO1xuICAgICAgLy8gUmUtdGhyb3cgd2l0aCBtb3JlIHVzZXItZnJpZW5kbHkgbWVzc2FnZVxuICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbWFnZSB1cGxvYWQgZmFpbGVkOiAke2Vycm9yLm1lc3NhZ2V9YCk7XG4gICAgICB9XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ltYWdlIHVwbG9hZCBmYWlsZWQ6IFVua25vd24gZXJyb3Igb2NjdXJyZWQnKTtcbiAgICB9XG4gIH1cblxuICAvLyBQdWJsaXNoIHBvc3QgdG8gRmFjZWJvb2sgKHVzZXIgZmVlZCBvciBwYWdlKVxuICBhc3luYyBwdWJsaXNoUG9zdChjb250ZW50OiBzdHJpbmcsIHBhZ2VJZD86IHN0cmluZywgb3ZlcnJpZGVUb2tlbj86IHN0cmluZyk6IFByb21pc2U8YW55PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHRva2VuID0gYXdhaXQgdGhpcy5nZXRBY2Nlc3NUb2tlbihvdmVycmlkZVRva2VuKTtcbiAgICAgIGlmICghdG9rZW4pIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyBGYWNlYm9vayBhY2Nlc3MgdG9rZW4gYXZhaWxhYmxlLiBQbGVhc2UgcmVjb25uZWN0IHlvdXIgRmFjZWJvb2sgYWNjb3VudC4nKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gVmFsaWRhdGUgdGhlIHRva2VuIGJlZm9yZSBhdHRlbXB0aW5nIHRvIHB1Ymxpc2hcbiAgICAgIGNvbnN0IHZhbGlkYXRpb24gPSBhd2FpdCB0aGlzLnZhbGlkYXRlVG9rZW4odG9rZW4pO1xuICAgICAgaWYgKCF2YWxpZGF0aW9uLnZhbGlkKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgRmFjZWJvb2sgYWNjZXNzIHRva2VuIGlzIGludmFsaWQ6ICR7dmFsaWRhdGlvbi5lcnJvciB8fCAnVW5rbm93biBlcnJvcid9LiBQbGVhc2UgcmVjb25uZWN0IHlvdXIgRmFjZWJvb2sgYWNjb3VudC5gKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgbGV0IGFjY2Vzc1Rva2VuVG9Vc2UgPSB0b2tlbjtcbiAgICAgIGxldCB1cmwgPSBgJHt0aGlzLmJhc2VVcmx9L21lL2ZlZWRgO1xuICAgICAgXG4gICAgICAvLyBJZiBhIHBhZ2UgSUQgaXMgcHJvdmlkZWQsIGdldCB0aGUgcGFnZSBhY2Nlc3MgdG9rZW5cbiAgICAgIGlmIChwYWdlSWQpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ0ZldGNoaW5nIHBhZ2UgYWNjZXNzIHRva2VuIGZvciBwYWdlIElEOicsIHBhZ2VJZCk7XG4gICAgICAgIGNvbnN0IHBhZ2VUb2tlblJlc3BvbnNlID0gYXdhaXQgZmV0Y2goXG4gICAgICAgICAgYCR7dGhpcy5iYXNlVXJsfS8ke3BhZ2VJZH0/ZmllbGRzPWFjY2Vzc190b2tlbiZhY2Nlc3NfdG9rZW49JHt0b2tlbn1gXG4gICAgICAgICk7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBwYWdlVG9rZW5EYXRhID0gYXdhaXQgcGFnZVRva2VuUmVzcG9uc2UuanNvbigpO1xuICAgICAgICBcbiAgICAgICAgaWYgKCFwYWdlVG9rZW5SZXNwb25zZS5vaykge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIHBhZ2UgYWNjZXNzIHRva2VuOicsIHBhZ2VUb2tlbkRhdGEpO1xuICAgICAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IHBhZ2VUb2tlbkRhdGEuZXJyb3I/Lm1lc3NhZ2UgfHwgJ0ZhaWxlZCB0byBnZXQgcGFnZSBhY2Nlc3MgdG9rZW4nO1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIGdldCBwYWdlIGFjY2VzcyB0b2tlbjogJHtlcnJvck1lc3NhZ2V9YCk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGFjY2Vzc1Rva2VuVG9Vc2UgPSBwYWdlVG9rZW5EYXRhLmFjY2Vzc190b2tlbjtcbiAgICAgICAgdXJsID0gYCR7dGhpcy5iYXNlVXJsfS8ke3BhZ2VJZH0vZmVlZGA7XG4gICAgICAgIGNvbnNvbGUubG9nKCdVc2luZyBwYWdlIGFjY2VzcyB0b2tlbiBmb3IgcHVibGlzaGluZycpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc29sZS5sb2coJ1VzaW5nIHVzZXIgYWNjZXNzIHRva2VuIGZvciBwdWJsaXNoaW5nIHRvIHBlcnNvbmFsIGZlZWQnKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gUHJlcGFyZSB0aGUgcG9zdCBkYXRhXG4gICAgICBjb25zdCBwb3N0RGF0YTogYW55ID0ge1xuICAgICAgICBtZXNzYWdlOiBjb250ZW50LFxuICAgICAgICBhY2Nlc3NfdG9rZW46IGFjY2Vzc1Rva2VuVG9Vc2VcbiAgICAgIH07XG4gICAgICBcbiAgICAgIGNvbnNvbGUubG9nKCdQdWJsaXNoaW5nIHRvIEZhY2Vib29rOicsIHsgdXJsLCBoYXNNZXNzYWdlOiAhIXBvc3REYXRhLm1lc3NhZ2UgfSk7XG4gICAgICBcbiAgICAgIC8vIFB1Ymxpc2ggdG8gRmFjZWJvb2tcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godXJsLCB7XG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgICAgICB9LFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShwb3N0RGF0YSlcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICBjb25zdCByZXNwb25zZURhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICBcbiAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgbGV0IGVycm9yTWVzc2FnZSA9ICdGYWlsZWQgdG8gcHVibGlzaCB0byBGYWNlYm9vayc7XG4gICAgICAgIGlmIChyZXNwb25zZURhdGEgJiYgcmVzcG9uc2VEYXRhLmVycm9yKSB7XG4gICAgICAgICAgZXJyb3JNZXNzYWdlID0gcmVzcG9uc2VEYXRhLmVycm9yLm1lc3NhZ2UgfHwgcmVzcG9uc2VEYXRhLmVycm9yLnR5cGUgfHwgZXJyb3JNZXNzYWdlO1xuICAgICAgICAgIC8vIExvZyBhZGRpdGlvbmFsIGVycm9yIGRldGFpbHMgZm9yIGRlYnVnZ2luZ1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhY2Vib29rIEFQSSBlcnJvciBkZXRhaWxzOicsIHtcbiAgICAgICAgICAgIHR5cGU6IHJlc3BvbnNlRGF0YS5lcnJvci50eXBlLFxuICAgICAgICAgICAgY29kZTogcmVzcG9uc2VEYXRhLmVycm9yLmNvZGUsXG4gICAgICAgICAgICBmYnRyYWNlX2lkOiByZXNwb25zZURhdGEuZXJyb3IuZmJ0cmFjZV9pZCxcbiAgICAgICAgICAgIG1lc3NhZ2U6IHJlc3BvbnNlRGF0YS5lcnJvci5tZXNzYWdlXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgRmFjZWJvb2sgQVBJIGVycm9yOiAke2Vycm9yTWVzc2FnZX1gKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgY29uc29sZS5sb2coJ1Bvc3QgcHVibGlzaGVkIHRvIEZhY2Vib29rIHN1Y2Nlc3NmdWxseTonLCByZXNwb25zZURhdGEpO1xuICAgICAgXG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICBkYXRhOiByZXNwb25zZURhdGEsXG4gICAgICAgIGZhY2Vib29rX3Bvc3RfaWQ6IHJlc3BvbnNlRGF0YS5pZFxuICAgICAgfTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgcHVibGlzaGluZyB0byBGYWNlYm9vazonLCBlcnJvcik7XG4gICAgICAvLyBSZS10aHJvdyB3aXRoIG1vcmUgdXNlci1mcmllbmRseSBtZXNzYWdlXG4gICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFB1Ymxpc2ggZmFpbGVkOiAke2Vycm9yLm1lc3NhZ2V9YCk7XG4gICAgICB9XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1B1Ymxpc2ggZmFpbGVkOiBVbmtub3duIGVycm9yIG9jY3VycmVkJyk7XG4gICAgfVxuICB9XG5cbiAgLy8gVGVzdCBGYWNlYm9vayBjb25uZWN0aW9uXG4gIGFzeW5jIHRlc3RDb25uZWN0aW9uKCk6IFByb21pc2U8eyBjb25uZWN0ZWQ6IGJvb2xlYW47IHVzZXI/OiBhbnk7IHBhZ2VzPzogYW55W107IHRva2VuSW5mbz86IGFueSB9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHRva2VuID0gYXdhaXQgdGhpcy5nZXRBY2Nlc3NUb2tlbigpO1xuICAgICAgaWYgKCF0b2tlbikge1xuICAgICAgICByZXR1cm4geyBjb25uZWN0ZWQ6IGZhbHNlIH07XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIFZhbGlkYXRlIHRva2VuXG4gICAgICBjb25zdCB2YWxpZGF0aW9uID0gYXdhaXQgdGhpcy52YWxpZGF0ZVRva2VuKHRva2VuKTtcbiAgICAgIGlmICghdmFsaWRhdGlvbi52YWxpZCkge1xuICAgICAgICByZXR1cm4geyBjb25uZWN0ZWQ6IGZhbHNlIH07XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIEdldCB1c2VyIHByb2ZpbGVcbiAgICAgIGNvbnN0IHByb2ZpbGUgPSBhd2FpdCB0aGlzLmdldFByb2ZpbGUoKTtcbiAgICAgIFxuICAgICAgLy8gR2V0IHBhZ2VzXG4gICAgICBjb25zdCBwYWdlcyA9IGF3YWl0IHRoaXMuZ2V0UGFnZXMoKTtcbiAgICAgIFxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgY29ubmVjdGVkOiB0cnVlLFxuICAgICAgICB1c2VyOiBwcm9maWxlLFxuICAgICAgICBwYWdlczogcGFnZXMsXG4gICAgICAgIHRva2VuSW5mbzogdmFsaWRhdGlvblxuICAgICAgfTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgdGVzdGluZyBGYWNlYm9vayBjb25uZWN0aW9uOicsIGVycm9yKTtcbiAgICAgIHJldHVybiB7IGNvbm5lY3RlZDogZmFsc2UgfTtcbiAgICB9XG4gIH1cbn1cblxuLy8gRXhwb3J0IHNpbmdsZXRvbiBpbnN0YW5jZVxuZXhwb3J0IGNvbnN0IGZhY2Vib29rU2VydmljZSA9IG5ldyBGYWNlYm9va1NlcnZpY2UoKTtcblxuLy8gRXhwb3J0IGluZGl2aWR1YWwgZnVuY3Rpb25zIGZvciBkaXJlY3QgdXNlXG5leHBvcnQgY29uc3QgZ2V0RmFjZWJvb2tUb2tlbiA9ICgpID0+IGZhY2Vib29rU2VydmljZS5nZXRBY2Nlc3NUb2tlbigpO1xuZXhwb3J0IGNvbnN0IGdldEZhY2Vib29rUGFnZXMgPSAoKSA9PiBmYWNlYm9va1NlcnZpY2UuZ2V0UGFnZXMoKTtcbmV4cG9ydCBjb25zdCBnZXRGYWNlYm9va1Byb2ZpbGUgPSAoKSA9PiBmYWNlYm9va1NlcnZpY2UuZ2V0UHJvZmlsZSgpO1xuZXhwb3J0IGNvbnN0IHB1Ymxpc2hUb0ZhY2Vib29rID0gKGNvbnRlbnQ6IHN0cmluZywgcGFnZUlkPzogc3RyaW5nKSA9PiBcbiAgZmFjZWJvb2tTZXJ2aWNlLnB1Ymxpc2hQb3N0KGNvbnRlbnQsIHBhZ2VJZCk7XG5leHBvcnQgY29uc3QgdGVzdEZhY2Vib29rQ29ubmVjdGlvbiA9ICgpID0+IGZhY2Vib29rU2VydmljZS50ZXN0Q29ubmVjdGlvbigpOyJdLCJuYW1lcyI6WyJzdXBhYmFzZSIsIkZhY2Vib29rU2VydmljZSIsImdldEFjY2Vzc1Rva2VuIiwib3ZlcnJpZGVUb2tlbiIsImNvbnNvbGUiLCJsb2ciLCJsZW5ndGgiLCJ2YWxpZGF0aW9uIiwidmFsaWRhdGVUb2tlbiIsInZhbGlkIiwiZXJyb3IiLCJFcnJvciIsInN0b3JlZFRva2VuIiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsInBlcm1pc3Npb25zIiwicmVtb3ZlSXRlbSIsImRhdGEiLCJzZXNzaW9uIiwic2Vzc2lvbkVycm9yIiwiYXV0aCIsImdldFNlc3Npb24iLCJmYWNlYm9va0FjY2Vzc1Rva2VuIiwicHJvdmlkZXJfdG9rZW4iLCJmYWxsYmFja0Vycm9yIiwidG9rZW4iLCJyZXNwb25zZSIsImZldGNoIiwiYmFzZVVybCIsIm9rIiwiZXJyb3JEYXRhIiwianNvbiIsIm1lc3NhZ2UiLCJkZWJ1Z0Vycm9yIiwiZ2V0UGFnZXMiLCJyZXF1aXJlZFBlcm1pc3Npb25zIiwibWlzc2luZ1Blcm1pc3Npb25zIiwiZmlsdGVyIiwicGVybSIsImluY2x1ZGVzIiwidXNlclJlc3BvbnNlIiwidXNlckRhdGEiLCJuYW1lIiwidXNlckVycm9yIiwiQXJyYXkiLCJpc0FycmF5IiwiZ2V0UHJvZmlsZSIsInVwbG9hZEltYWdlIiwiYmFzZTY0SW1hZ2UiLCJjYXB0aW9uIiwicGFnZUlkIiwiYWNjZXNzVG9rZW5Ub1VzZSIsInVybCIsInBhZ2VUb2tlblJlc3BvbnNlIiwicGFnZVRva2VuRGF0YSIsImVycm9yTWVzc2FnZSIsImFjY2Vzc190b2tlbiIsImltYWdlQnVmZmVyIiwiQnVmZmVyIiwiZnJvbSIsImZvcm1EYXRhIiwiRm9ybURhdGEiLCJhcHBlbmQiLCJCbG9iIiwidHlwZSIsImhhc0NhcHRpb24iLCJtZXRob2QiLCJib2R5IiwicmVzcG9uc2VEYXRhIiwiY29kZSIsImZidHJhY2VfaWQiLCJzdWNjZXNzIiwiZmFjZWJvb2tfcG9zdF9pZCIsInBvc3RfaWQiLCJwdWJsaXNoUG9zdCIsImNvbnRlbnQiLCJwb3N0RGF0YSIsImhhc01lc3NhZ2UiLCJoZWFkZXJzIiwiSlNPTiIsInN0cmluZ2lmeSIsImlkIiwidGVzdENvbm5lY3Rpb24iLCJjb25uZWN0ZWQiLCJwcm9maWxlIiwicGFnZXMiLCJ1c2VyIiwidG9rZW5JbmZvIiwiZmFjZWJvb2tTZXJ2aWNlIiwiZ2V0RmFjZWJvb2tUb2tlbiIsImdldEZhY2Vib29rUGFnZXMiLCJnZXRGYWNlYm9va1Byb2ZpbGUiLCJwdWJsaXNoVG9GYWNlYm9vayIsInRlc3RGYWNlYm9va0Nvbm5lY3Rpb24iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/services/facebookService.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@supabase","vendor-chunks/tr46","vendor-chunks/@opentelemetry","vendor-chunks/whatwg-url","vendor-chunks/webidl-conversions"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Ffacebook%2Fpublish%2Froute&page=%2Fapi%2Ffacebook%2Fpublish%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ffacebook%2Fpublish%2Froute.ts&appDir=%2FUsers%2Ftest%2Fstartups%2Fzenith%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Ftest%2Fstartups%2Fzenith&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();