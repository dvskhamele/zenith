"use strict";(()=>{var e={};e.id=6683,e.ids=[6683],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},84770:e=>{e.exports=require("crypto")},17702:e=>{e.exports=require("events")},32615:e=>{e.exports=require("http")},35240:e=>{e.exports=require("https")},17360:e=>{e.exports=require("url")},21764:e=>{e.exports=require("util")},61680:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>x,patchFetch:()=>m,requestAsyncStorage:()=>c,routeModule:()=>l,serverHooks:()=>h,staticGenerationAsyncStorage:()=>d});var s={};r.r(s),r.d(s,{POST:()=>u});var o=r(49303),i=r(88716),a=r(60670),n=r(87070);let p=(0,r(29177).eI)({projectId:"01jt7o8j",dataset:"zenith",apiVersion:"2023-08-01",useCdn:!0,token:process.env.SANITY_API});async function u(e){try{let{postId:t}=await e.json();if(!t)return n.NextResponse.json({error:"Post ID is required"},{status:400});let r=await p.fetch(`*[_id == $postId][0]{
      title,
      'slug': slug.current,
      body,
    }`,{postId:t});if(!r)return n.NextResponse.json({error:"Post not found"},{status:404});let s=r.body.filter(e=>"block"===e._type&&e.children).map(e=>e.children.map(e=>e.text).join("")).join("\n\n"),o=`New Blog Post: ${r.title}

${s.substring(0,200)}...

Read more: https://qfpvsyhtijwxkmyrqswa.supabase.co/blog/${r.slug}`,i=await fetch("https://app.ayrshare.com/api/post",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${process.env.AYRSHARE_API_KEY}`},body:JSON.stringify({post:o,platforms:["twitter","linkedin"]})});if(!i.ok){let e=await i.json();return console.error("Ayrshare API error:",e),n.NextResponse.json({error:"Failed to publish to social media"},{status:500})}let a=await i.json();return n.NextResponse.json({message:"Post published to social media successfully",ayrshareData:a},{status:200})}catch(e){return console.error("Error publishing to social media:",e),n.NextResponse.json({error:"Internal server error"},{status:500})}}let l=new o.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/publish-social/route",pathname:"/api/publish-social",filename:"route",bundlePath:"app/api/publish-social/route"},resolvedPagePath:"/Users/test/startups/zenith/src/app/api/publish-social/route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:c,staticGenerationAsyncStorage:d,serverHooks:h}=l,x="/api/publish-social/route";function m(){return(0,a.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:d})}}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[8948,5972,9177],()=>r(61680));module.exports=s})();